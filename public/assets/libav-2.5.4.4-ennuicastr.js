(function(){function m(){try{if("object"===typeof WebAssembly&&"function"===typeof WebAssembly.instantiate){var b=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(b instanceof WebAssembly.Module)return new WebAssembly.Instance(b)instanceof WebAssembly.Instance}}catch(h){}return!1}var b,h=".",k="undefined"!==typeof process;"undefined"===typeof LibAV&&(LibAV={});b=LibAV;b.base&&(h=b.base);b.LibAV=function(e){e=e||{};var l=!e.nowasm&&m(),a;return Promise.all([]).then(function(){if(!b.LibAVFactory){var a=
h+"/libav-2.5.4.4-ennuicastr."+(l?"w":"")+"asm.js";if(k)b.LibAVFactory=require(a);else if("undefined"===typeof Worker||e.noworker)if("undefined"!==typeof importScripts)importScripts(a),b.LibAVFactory=LibAVFactory;else return(new Promise(function(d,c){var f=document.createElement("script");f.src=a;f.addEventListener("load",d);f.addEventListener("error",c);f.async=!0;document.body.appendChild(f)})).then(function(){b.LibAVFactory=LibAVFactory})}}).then(function(){return!k&&"undefined"!==typeof Worker&&
!e.noworker?(a={},a.worker=new Worker(h+"/libav-2.5.4.4-ennuicastr."+(l?"w":"")+"asm.js"),new Promise(function(b,d){a.on=1;a.handlers={onready:[function(){b()},null],onwrite:[function(c){a.onwrite&&a.onwrite.apply(a,c)},null]};a.c=function(){var c=Array.prototype.slice.call(arguments);return new Promise(function(f,d){var b=a.on++;c=[b].concat(c);a.handlers[b]=[f,d];a.worker.postMessage(c)})};a.worker.onmessage=function(c){var d=c.data[0],b=a.handlers[d];if(b){if(c.data[2])b[0](c.data[3]);else b[1](c.data[3]);
"number"===typeof d&&delete a.handlers[d]}};a.terminate=function(){a.worker.terminate()}})):Promise.all([]).then(function(){return new Promise(function(a){b.LibAVFactory().then(function(d){delete d.then;a(d)})})}).then(function(b){a=b;a.worker=!1;a.c=function(b){var c=Array.prototype.slice.call(arguments,1);return new Promise(function(f,n){try{f(a[b].apply(a,c))}catch(g){n(g)}})};a.terminate=function(){}})}).then(function(){function b(d,c){void 0===typeof c&&(c=0);var f=c;d.forEach(function(b){a[b]=
f++})}"av_get_bytes_per_sample av_opt_set_int_list_js av_frame_alloc av_frame_free av_frame_get_buffer av_frame_make_writable av_frame_unref av_packet_alloc av_packet_free av_packet_new_side_data av_packet_unref av_strdup av_buffersink_get_frame av_buffersink_set_frame_size av_buffersrc_add_frame_flags avfilter_free avfilter_get_by_name avfilter_graph_alloc avfilter_graph_config avfilter_graph_create_filter_js avfilter_graph_free avfilter_graph_parse avfilter_inout_alloc avfilter_inout_free avfilter_link avcodec_alloc_context3 avcodec_close avcodec_find_decoder avcodec_find_decoder_by_name avcodec_find_encoder avcodec_find_encoder_by_name avcodec_free_context avcodec_open2 avcodec_parameters_from_context avcodec_parameters_to_context avcodec_receive_frame avcodec_receive_packet avcodec_send_frame avcodec_send_packet av_find_input_format avformat_alloc_context avformat_alloc_output_context2_js avformat_close_input avformat_find_stream_info avformat_free_context avformat_new_stream avformat_open_input avformat_open_input_js avformat_write_header avio_open2_js avio_close av_find_best_stream av_grow_packet av_interleaved_write_frame av_packet_make_writable av_read_frame av_shrink_packet av_write_frame av_write_trailer AVCodecContext_time_base_s AVStream_time_base_num AVStream_time_base_den AVStream_time_base_s AVPacketSideData_data AVPacketSideData_size AVPacketSideData_type ff_error calloc free malloc mallinfo_uordblks AVFrame_channel_layout AVFrame_channel_layout_s AVFrame_channel_layouthi AVFrame_channel_layouthi_s AVFrame_channels AVFrame_channels_s AVFrame_data_a AVFrame_data_a_s AVFrame_format AVFrame_format_s AVFrame_nb_samples AVFrame_nb_samples_s AVFrame_pts AVFrame_pts_s AVFrame_ptshi AVFrame_ptshi_s AVFrame_sample_rate AVFrame_sample_rate_s AVCodecContext_bit_rate AVCodecContext_bit_rate_s AVCodecContext_bit_ratehi AVCodecContext_bit_ratehi_s AVCodecContext_channel_layout AVCodecContext_channel_layout_s AVCodecContext_channel_layouthi AVCodecContext_channel_layouthi_s AVCodecContext_channels AVCodecContext_channels_s AVCodecContext_frame_size AVCodecContext_frame_size_s AVCodecContext_sample_fmt AVCodecContext_sample_fmt_s AVCodecContext_sample_rate AVCodecContext_sample_rate_s AVCodecParameters_codec_id AVCodecParameters_codec_id_s AVCodecParameters_codec_type AVCodecParameters_codec_type_s AVCodecParameters_extradata AVCodecParameters_extradata_s AVPacket_pts AVPacket_pts_s AVPacket_ptshi AVPacket_ptshi_s AVPacket_dts AVPacket_dts_s AVPacket_dtshi AVPacket_dtshi_s AVPacket_data AVPacket_data_s AVPacket_size AVPacket_size_s AVPacket_stream_index AVPacket_stream_index_s AVPacket_flags AVPacket_flags_s AVPacket_side_data AVPacket_side_data_s AVPacket_side_data_elems AVPacket_side_data_elems_s AVPacket_duration AVPacket_duration_s AVPacket_durationhi AVPacket_durationhi_s AVFormatContext_nb_streams AVFormatContext_nb_streams_s AVFormatContext_oformat AVFormatContext_oformat_s AVFormatContext_pb AVFormatContext_pb_s AVFormatContext_streams_a AVFormatContext_streams_a_s AVStream_codecpar AVStream_codecpar_s AVStream_duration AVStream_duration_s AVStream_durationhi AVStream_durationhi_s AVFilterInOut_filter_ctx AVFilterInOut_filter_ctx_s AVFilterInOut_name AVFilterInOut_name_s AVFilterInOut_next AVFilterInOut_next_s AVFilterInOut_pad_idx AVFilterInOut_pad_idx_s readFile writeFile unlink mkdev mkreaderdev mkwriterdev ff_reader_dev_send ff_init_encoder ff_init_decoder ff_free_encoder ff_free_decoder ff_encode_multi ff_decode_multi ff_set_packet ff_init_muxer ff_free_muxer ff_init_demuxer_file ff_write_multi ff_read_multi ff_init_filter_graph ff_filter_multi ff_copyout_frame ff_copyin_frame ff_copyout_packet ff_copyin_packet ff_malloc_int32_list ff_malloc_int64_list av_frame_free_js av_packet_free_js avformat_close_input_js avcodec_free_context_js avfilter_graph_free_js avfilter_inout_free_js copyin_u8 copyout_u8 copyin_s16 copyout_s16 copyin_s32 copyout_s32 copyin_f32 copyout_f32".split(" ").forEach(function(b){if(a[b]){var c=
a[b];a[b]=function(){var b=arguments;return new Promise(function(d,g){try{var e=c.apply(a,b);"object"===typeof e&&null!==e&&e.then?e.then(d).catch(g):d(e)}catch(h){g(h)}})}}else a[b]=function(){return a.c.apply(a,[b].concat(Array.prototype.slice.call(arguments)))}});["AVFrame","AVCodecContext","AVFilterInOut"].forEach(function(b){a[b+"_set"]=function(c,f){var e=[],g;for(g in f)e.push(a.c(b+"_"+g+"_s",c,f[g]));return Promise.all(e)}});a.AV_OPT_SEARCH_CHILDREN=1;b("AVMEDIA_TYPE_UNKNOWN AVMEDIA_TYPE_VIDEO AVMEDIA_TYPE_AUDIO AVMEDIA_TYPE_DATA AVMEDIA_TYPE_SUBTITLE AVMEDIA_TYPE_ATTACHMENT".split(" "),
-1);b("AV_SAMPLE_FMT_NONE AV_SAMPLE_FMT_U8 AV_SAMPLE_FMT_S16 AV_SAMPLE_FMT_S32 AV_SAMPLE_FMT_FLT AV_SAMPLE_FMT_DBL AV_SAMPLE_FMT_U8P AV_SAMPLE_FMT_S16P AV_SAMPLE_FMT_S32P AV_SAMPLE_FMT_FLTP AV_SAMPLE_FMT_DBLP AV_SAMPLE_FMT_S64 AV_SAMPLE_FMT_S64P AV_SAMPLE_FMT_NB".split(" "),-1);a.AVIO_FLAG_READ=1;a.AVIO_FLAG_WRITE=2;a.AVIO_FLAG_READ_WRITE=3;a.AVIO_FLAG_NONBLOCK=8;a.AVIO_FLAG_DIRECT=32768;a.EAGAIN=6;a.AVERROR_EOF=-541478725;return a})};k&&(module.exports=b)})();
